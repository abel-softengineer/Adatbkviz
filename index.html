<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Többválaszos Kvíz</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    .kerdes { margin-bottom: 2rem; }
    .valasz { display: block; margin: 5px 0; }
    .helyes { color: green; }
    .rossz { color: red; }
  </style>
</head>
<body>
  <h1>Adatbázis Kvíz – Többválaszos</h1>
  <div id="kviz"></div>
  <button onclick="ellenoriz()">Ellenőrzés</button>

  <script>
    let kerdesek = [];

    fetch('kerdesek.json')
      .then(response => response.json())
      .then(data => {
        kerdesek = data;
        megjelenitKerdesek();
      });

    function megjelenitKerdesek() {
      const kvizDiv = document.getElementById('kviz');
      kvizDiv.innerHTML = '';

      kerdesek.forEach((kerdesObj, index) => {
        const kerdesDiv = document.createElement('div');
        kerdesDiv.classList.add('kerdes');

        const kerdesCim = document.createElement('p');
        kerdesCim.textContent = (index + 1) + '. ' + kerdesObj.kerdes;
        kerdesDiv.appendChild(kerdesCim);

        kerdesObj.valaszok.forEach((valasz, valaszIndex) => {
          const label = document.createElement('label');
          label.classList.add('valasz');

          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.name = 'kerdes' + index;
          checkbox.value = valaszIndex;

          label.appendChild(checkbox);
          label.appendChild(document.createTextNode(' ' + valasz));
          kerdesDiv.appendChild(label);
        });

        kvizDiv.appendChild(kerdesDiv);
      });
    }

    function ellenoriz() {
      kerdesek.forEach((kerdesObj, index) => {
        const valaszok = document.querySelectorAll(`input[name="kerdes${index}"]`);
        valaszok.forEach(input => {
          const valaszIndex = parseInt(input.value);
          const label = input.parentElement;
          label.classList.remove('helyes', 'rossz');

          if (input.checked) {
            if (kerdesObj.helyes.includes(valaszIndex)) {
              label.classList.add('helyes');
            } else {
              label.classList.add('rossz');
            }
          } else {
            if (kerdesObj.helyes.includes(valaszIndex)) {
              label.classList.add('rossz'); // helyes, de nem jelölte be
            }
          }
        });
      });
    }
  </script>
</body>
</html>
